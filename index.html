<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test2</title>
<link rel="stylesheet" href="style.css">
</head>

<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="audio.min.js"></script>

<script>
  audiojs.events.ready(function() {
    var as = audiojs.createAll();
  });
</script>


<audio id="audioPlayer1">
        <source src="son/1.wav" type="audio/wav" >
    </audio>
    
    <audio id="audioPlayer2">
        <source src="son/2.wav" type="audio/wav" >
    </audio>
    
    <audio id="audioPlayer3">
        <source src="son/3.wav" type="audio/wav" >
    </audio>

<script>
	
var random4 = Math.floor(((Math.random() * 100) /20)+1); // random entre 1 et 5
var audio1 = document.getElementById('audioPlayer1');
    audio1.src = 'son/' + random4 + '.wav' ;
	
var random5 = Math.floor(((Math.random() * 100) /20)+1); // random entre 1 et 5
if(random4 == random5) { 
	if (random5 == 1) random5++;
	else random5 --;
	}
	
var audio2 = document.getElementById('audioPlayer2');
    audio2.src = 'son/' + random5 + '.wav' ;

var transitionTime = Math.floor((((Math.random() * 100)/3)+10 )*1000); //random entre 15000 et 48000
var transitionTime2 = transitionTime - 8000;
var transitionTime3 = Math.floor((((Math.random() * 100)/3)+60 )*1000); //random entre 60000 et 980000
var transitionTime4 = transitionTime3 - 8000;
  //  audioElement.setAttribute('src' , 'son/' + random4 + '.wav');

$(document).ready(function(){
	
  $('#start').click(function(){
	  $("#start").hide();
       play('audioPlayer1');
		setTimeout(fadeOut, transitionTime, 'audioPlayer1');
		setTimeout(fadeIn, transitionTime2,'audioPlayer2');
		setTimeout(play, transitionTime2, 'audioPlayer2');
		setTimeout(fadeOut, transitionTime3, 'audioPlayer2');
		setTimeout(fadeIn, transitionTime4,'audioPlayer3');
		setTimeout(play, transitionTime4, 'audioPlayer3');
		setTimeout(fadeOut, 115000, 'audioPlayer3');
		
		
	$("div.first").hide().css("opacity",100);
	$("div.second").hide().css("opacity",100);
	$("div.third").hide().css("opacity",100);
	$("div.first").fadeIn(5000).delay(30000).fadeOut(20000);
	$("div.second").delay(35000).fadeIn(20000).delay(30000).fadeOut(20000);
	$("div.third").delay(75000).fadeIn(20000).delay(30000).fadeOut(5000).val(1);
	
	
	
  });
});



function play(idPlayer) {
    var player = document.querySelector('#' + idPlayer);
	player.play();
        
}

function resume(idPlayer) {
    var player = document.querySelector('#' + idPlayer);
	
    player.currentTime = 0;
    player.pause();
}

function fadeIn(idPlayer) {
var vol = 0;
var interval = 120; // 200ms interval
var player = document.querySelector('#' + idPlayer);

var fadeIn = setInterval(
  function() {
    // Increment the volume by 0.01 as long as it is under 1
    if (vol < 1) {
      vol += 0.01;
	  player.volume = vol;
	  
    }
    else {
      // Stop the setInterval when 1 is reached
      clearInterval(fadeout);
    }
  }, interval);
}

function fadeOut(idPlayer) {
var vol = 1;
var interval = 120; // 200ms interval
var player = document.querySelector('#' + idPlayer);

var fadeout = setInterval(
  function() {
    // Reduce volume by 0.01 as long as it is above 0
    if (vol > 0) {
      vol -= 0.01;
	  player.volume = vol;
	  
    }
    else {
      // Stop the setInterval when 0 is reached
      clearInterval(fadeout);
    }
  }, interval);
}


</script>

<input type="submit" class = "button" id="start" value="Start !">


<!-- ---------------------------------------------------------------- -->

<div class="first imageDiv" id="photo1" style="position:absolute;">

<script type="text/javascript">
var imgA = document.createElement("img");
var random1 = 2;//Math.floor(((Math.random() * 100) /17 )+1); // random entre 1 et 6
imgA.src = "photo/" + random1 + ".jpg";
imgA.classList.add('imgSize');

document.getElementById('photo1').appendChild(imgA);


</script>
</div>

<!-- ------------------------------------------------------------------>

<div class="second imageDiv" id="photo2" style="position:absolute;">

<script type="text/javascript">
var imgB = document.createElement("img");
var random2 = 4;// Math.floor(((Math.random() * 100) /17)+1); // random entre 1 et 6
if(random2 == random1) {
	if(random2 == 20) {
		random3 -= 1;
	}
	else {
		random2 += 1;
	}
}

imgB.src = "photo/" + random2 + ".jpg";
imgB.classList.add('imgSize');

document.getElementById('photo2').appendChild(imgB);
</script>
</div>

<!-- ---------------------------------------------------------------- -->

<div class="third imageDiv" id="photo3" style="position:absolute;">
<script type="text/javascript">
var imgC = document.createElement("img");
var random3 = 5;//Math.floor(((Math.random() * 100) /17)+1); // random entre 1 et 6
if((random3 == random1) || (random3 == random2)) 
{
	if(random3 == 20) 
	{
		if((random1== (random3-2)) ||(random2 == (random3-2))) {
			random3 -= 3;
		}
		else {
			random3 -=2;
		}
	}
	else
	{
		if ((random1 == (random3+1)) ||(random2 == (random3+1))) {
			random3 += 2;
		}
		else {
			random3 += 1;
		}
	}
}

imgC.src = "photo/" + random3 + ".jpg";
imgC.classList.add('imgSize');

document.getElementById('photo3').appendChild(imgC);

</script>
</div>


<!-- ---------------------------------------------------------------- -->

 
<!--
 
<script> /*	<h1>
 

         Aléa 1 = 
         <script type="text/javascript">
            document.write(random1);
         </script>
         <br />
          Aléa 2 = 
         <script type="text/javascript">
            document.write(random2)
         </script>
         <br />
         Aléa 3 = 
         <script type="text/javascript">
            document.write(random3)
         </script>
         <br />
         Aléa 4 = 
         <script type="text/javascript">
            document.write(random4)
         </script>
      </h1>
	  */</script>
      -->
      

</body>
</html>

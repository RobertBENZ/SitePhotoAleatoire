<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test2</title>
<link rel="stylesheet" href="style.css">
</head>

<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<style> h1 {opacity:0;} </style> <!-- Commenter pour voir les nb aleatoirs -->

<audio id="audioPlayer1">
        <source src="son/1.wav" type="audio/wav" >
    </audio>
    
    <audio id="audioPlayer2">
        <source src="son/2.wav" type="audio/wav" >
    </audio>
    
    <audio id="audioPlayer3">
        <source src="son/3.wav" type="audio/wav" >
    </audio>

<script>



var photoNb = 3;
var soundNb = 8;

var photoArray = [photoNb];
for(var i = 0 ; i < photoNb ; i ++){
photoArray[i] = i+1;	
}

var soundArray = [soundNb];
for(var i = 0 ; i < soundNb ; i ++) {
soundArray[i] = i+1;	
}

 ShuffleArray(photoArray);
 ShuffleArray(soundArray);
	

var audio1 = document.getElementById('audioPlayer1');
    audio1.src = 'son/' + soundArray[0] + '.wav' ;
	
var audio2 = document.getElementById('audioPlayer2');
    audio2.src = 'son/' + soundArray[1] + '.wav' ;
	
var audio3 = document.getElementById('audioPlayer3');
    audio3.src = 'son/' + soundArray[2] + '.wav' ;

var transitionTime = randomInterval(15000,48000); //random entre 15000 et 48000
var transitionTime2 = transitionTime - 8000;
var transitionTime3 = randomInterval(60000,98000); //random entre 60000 et 980000
var transitionTime4 = transitionTime3 - 8000;
  

$(document).ready(function(){
	
  $('#start').click(function(){
	  $("#start").hide().delay(130000);
	  
       play('audioPlayer1');
		setTimeout(fadeOut, transitionTime, 'audioPlayer1');
		setTimeout(fadeIn, transitionTime2,'audioPlayer2');
		setTimeout(play, transitionTime2, 'audioPlayer2');
		setTimeout(fadeOut, transitionTime3, 'audioPlayer2');
		setTimeout(fadeIn, transitionTime4,'audioPlayer3');
		setTimeout(play, transitionTime4, 'audioPlayer3');
		setTimeout(fadeOut, 122000, 'audioPlayer3');
		setTimeout(reloadPage,140000);
		
		
	$("div.first").hide().css("opacity",100);
	$("div.second").hide().css("opacity",100);
	$("div.third").hide().css("opacity",100);
	$("div.first").fadeIn(10000).delay(30000).fadeOut(20000);
	$("div.second").delay(40000).fadeIn(20000).delay(30000).fadeOut(20000);
	$("div.third").delay(80000).fadeIn(20000).delay(30000).fadeOut(5000);
	
	
	
	
  });
});

function ShuffleArray (a) {
	var j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
	
}

function randomInterval(min, max) {
  return Math.round(Math.random() * (max - min) + min);
}

function reloadPage(){
	location.reload();
}

function play(idPlayer) {
    var player = document.querySelector('#' + idPlayer);
	player.play();
        
}

function resume(idPlayer) {
    var player = document.querySelector('#' + idPlayer);
	
    player.currentTime = 0;
    player.pause();
}

function fadeIn(idPlayer) {
var volIn = 0;
var interval = 120; // 200ms interval
var player = document.querySelector('#' + idPlayer);

var fadein = setInterval(
  function() {
    // Increment the volume by 0.01 as long as it is under 1
    if (volIn < 0.99) {
      volIn += 0.01;
	  player.volume = volIn;
	  
    }
    else {
      // Stop the setInterval when 1 is reached
      clearInterval(fadein);
    }
  }, interval);
}

function fadeOut(idPlayer) {
var volOut = 1;
var interval = 120; // 200ms interval
var player = document.querySelector('#' + idPlayer);

var fadeout = setInterval(
  function() {
    // Reduce volume by 0.01 as long as it is above 0
    if (volOut > 0.01) {
      volOut -= 0.01;
	  player.volume = volOut;
	  
    }
    else {
      // Stop the setInterval when 0 is reached
      clearInterval(fadeout);
    }
  }, interval);
}


</script>

<div>

<input type="submit" class = "button" id="start" value="Entrez">
</div>

<!-- ---------------------------------------------------------------- -->

<div class="first imageDiv" id="photo1" style="position:absolute;">

<script type="text/javascript">
var imgA = document.createElement("img");
imgA.src = "photo/" + photoArray[0] + ".jpg";
imgA.classList.add('imgSize');

document.getElementById('photo1').appendChild(imgA);
</script>
</div>

<!-- ------------------------------------------------------------------>

<div class="second imageDiv" id="photo2" style="position:absolute;">

<script type="text/javascript">
var imgB = document.createElement("img");
imgB.src = "photo/" + photoArray[1] + ".jpg";
imgB.classList.add('imgSize');

document.getElementById('photo2').appendChild(imgB);
</script>
</div>

<!-- ---------------------------------------------------------------- -->

<div class="third imageDiv" id="photo3" style="position:absolute;">
<script type="text/javascript">
var imgC = document.createElement("img");
imgC.src = "photo/" + photoArray[2] + ".jpg";
imgC.classList.add('imgSize');

document.getElementById('photo3').appendChild(imgC);
</script>
</div>


<!-- ---------------------------------------------------------------- -->

 

 
	<h1 id="info">
 

         Photo 1 = 
         <script type="text/javascript">
            document.write(photoArray[0]);
         </script>
         <br />
          Photo 2 = 
         <script type="text/javascript">
            document.write(photoArray[1]);
         </script>
         <br />
         Photo 3 = 
         <script type="text/javascript">
            document.write(photoArray[2]);
         </script>
         <br />
          Son 1 = 
         <script type="text/javascript">
            document.write(soundArray[0]);
         </script>
         <br />
          Son 2 = 
         <script type="text/javascript">
            document.write(soundArray[1]);
         </script>
         <br />
         Son 3 = 
         <script type="text/javascript">
            document.write(soundArray[2]);
         </script>
         <br />
        
      </h1>
	
      

</body>
</html>
